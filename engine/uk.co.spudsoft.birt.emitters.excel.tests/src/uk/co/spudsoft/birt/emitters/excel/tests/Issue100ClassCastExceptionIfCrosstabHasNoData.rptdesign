<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 4.2.2.v201301221637 Build &lt;4.2.2.v20130206-1509></property>
    <list-property name="userProperties">
        <structure>
            <property name="name">Data Cube.Data Set.x</property>
            <property name="type">integer</property>
            <property name="isVisible">false</property>
        </structure>
        <structure>
            <property name="name">Data Cube.Data Set.y</property>
            <property name="type">integer</property>
            <property name="isVisible">false</property>
        </structure>
    </list-property>
    <property name="Data Cube.Data Set.x">135</property>
    <property name="Data Cube.Data Set.y">80</property>
    <property name="units">in</property>
    <property name="iconFile">/templates/blank_report.gif</property>
    <property name="layoutPreference">auto layout</property>
    <property name="bidiLayoutOrientation">ltr</property>
    <property name="imageDPI">99</property>
    <data-sources>
        <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="Data Source" id="7">
            <property name="odaDriverClass">org.eclipse.birt.report.data.oda.sampledb.Driver</property>
            <property name="odaURL">jdbc:classicmodels:sampledb</property>
            <property name="odaUser">ClassicModels</property>
        </oda-data-source>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="Data Set" id="8">
            <property name="nullsOrdering">nulls lowest</property>
            <list-property name="resultSetHints">
                <structure>
                    <property name="position">1</property>
                    <property name="name">CUSTOMERNUMBER</property>
                    <property name="nativeName">CUSTOMERNUMBER</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">CUSTOMERNAME</property>
                    <property name="nativeName">CUSTOMERNAME</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">THEMONTH</property>
                    <property name="nativeName">THEMONTH</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">THEYEAR</property>
                    <property name="nativeName">THEYEAR</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">ORDER_COUNT</property>
                    <property name="nativeName">ORDER_COUNT</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">PAYMENT_COUNT</property>
                    <property name="nativeName">PAYMENT_COUNT</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
            </list-property>
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">CUSTOMERNUMBER</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">CUSTOMERNUMBER</text-property>
                    <text-property name="heading">CUSTOMERNUMBER</text-property>
                </structure>
                <structure>
                    <property name="columnName">CUSTOMERNAME</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">CUSTOMERNAME</text-property>
                    <text-property name="heading">CUSTOMERNAME</text-property>
                </structure>
                <structure>
                    <property name="columnName">THEMONTH</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">THEMONTH</text-property>
                    <text-property name="heading">THEMONTH</text-property>
                </structure>
                <structure>
                    <property name="columnName">THEYEAR</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">THEYEAR</text-property>
                    <text-property name="heading">THEYEAR</text-property>
                </structure>
                <structure>
                    <property name="columnName">ORDER_COUNT</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">ORDER_COUNT</text-property>
                    <text-property name="heading">ORDER_COUNT</text-property>
                </structure>
                <structure>
                    <property name="columnName">PAYMENT_COUNT</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">PAYMENT_COUNT</text-property>
                    <text-property name="heading">PAYMENT_COUNT</text-property>
                </structure>
            </list-property>
            <list-property name="filter"/>
            <list-property name="parameters"/>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">CUSTOMERNUMBER</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">CUSTOMERNAME</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">THEMONTH</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">THEYEAR</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">ORDER_COUNT</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">PAYMENT_COUNT</property>
                        <property name="dataType">integer</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">Data Source</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">CUSTOMERNUMBER</property>
                    <property name="nativeName">CUSTOMERNUMBER</property>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">CUSTOMERNAME</property>
                    <property name="nativeName">CUSTOMERNAME</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">THEMONTH</property>
                    <property name="nativeName">THEMONTH</property>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">THEYEAR</property>
                    <property name="nativeName">THEYEAR</property>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">ORDER_COUNT</property>
                    <property name="nativeName">ORDER_COUNT</property>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">PAYMENT_COUNT</property>
                    <property name="nativeName">PAYMENT_COUNT</property>
                    <property name="dataType">integer</property>
                </structure>
            </list-property>
            <xml-property name="queryText"><![CDATA[select
    coalesce(o.customernumber, p.customernumber) as customernumber,
    coalesce(o.customername, p.customername)     as customername,
    coalesce(o.themonth, p.themonth)             as themonth,
    coalesce(o.theyear, p.theyear)               as theyear,
    coalesce(o.order_count, 0)                   as order_count,
    coalesce(p.payment_count, 0)                 as payment_count
from (
        select
            c.CUSTOMERNUMBER,
            max(c.CUSTOMERNAME) as customername,
            month(o.ORDERDATE)  as themonth,
            year(o.orderdate)   as theyear,
            count(*)            as order_count
        from 
            CLASSICMODELS.CUSTOMERS c
            inner join CLASSICMODELS.ORDERS o on c.CUSTOMERNUMBER = o.CUSTOMERNUMBER
        group by
            c.CUSTOMERNUMBER,
            month(o.ORDERDATE),
            year(o.orderdate)
    ) o
    left outer join (
        select
            c.CUSTOMERNUMBER,
            max(c.CUSTOMERNAME) as customername,
            month(p.paymentdate) as themonth,
            year(p.paymentdate) as theyear,
            count(*)            as payment_count
        from 
            CLASSICMODELS.CUSTOMERS c
            inner join CLASSICMODELS.PAYMENTS p on c.CUSTOMERNUMBER = p.CUSTOMERNUMBER
        group by
            c.CUSTOMERNUMBER,
            month(p.paymentdate),
            year(p.paymentdate)
    ) p
        on o.CUSTOMERNUMBER = p.CUSTOMERNUMBER
        and o.themonth = p.themonth
        and o.theyear  = p.theyear
order by
    customername,
    theyear,
    themonth
    
]]></xml-property>
        </oda-data-set>
    </data-sets>
    <cubes>
        <tabular-cube name="Data Cube" id="99">
            <property name="dimensions">
                <tabular-dimension name="Group" id="100">
                    <property name="defaultHierarchy">NewTabularHierarchy</property>
                    <property name="hierarchies">
                        <tabular-hierarchy name="NewTabularHierarchy" id="101">
                            <property name="levels">
                                <tabular-level name="CUSTOMERNUMBER" id="102">
                                    <property name="dataType">integer</property>
                                    <property name="columnName">CUSTOMERNUMBER</property>
                                </tabular-level>
                                <tabular-level name="CUSTOMERNAME" id="103">
                                    <property name="dataType">string</property>
                                    <property name="columnName">CUSTOMERNAME</property>
                                </tabular-level>
                            </property>
                        </tabular-hierarchy>
                    </property>
                </tabular-dimension>
                <tabular-dimension name="Group1" id="104">
                    <property name="defaultHierarchy">NewTabularHierarchy1</property>
                    <property name="hierarchies">
                        <tabular-hierarchy name="NewTabularHierarchy1" id="105">
                            <property name="levels">
                                <tabular-level name="THEYEAR" id="106">
                                    <property name="dataType">integer</property>
                                    <property name="columnName">THEYEAR</property>
                                </tabular-level>
                                <tabular-level name="THEMONTH" id="107">
                                    <property name="dataType">integer</property>
                                    <property name="columnName">THEMONTH</property>
                                </tabular-level>
                            </property>
                        </tabular-hierarchy>
                    </property>
                </tabular-dimension>
            </property>
            <property name="measureGroups">
                <tabular-measure-group name="Summary Field" id="108">
                    <property name="measures">
                        <tabular-measure name="ORDER_COUNT" id="109">
                            <expression name="measureExpression">dataSetRow["ORDER_COUNT"]</expression>
                            <property name="dataType">integer</property>
                        </tabular-measure>
                        <tabular-measure name="PAYMENT_COUNT" id="110">
                            <expression name="measureExpression">dataSetRow["PAYMENT_COUNT"]</expression>
                            <property name="dataType">integer</property>
                        </tabular-measure>
                    </property>
                </tabular-measure-group>
            </property>
            <property name="dataSet">Data Set</property>
        </tabular-cube>
    </cubes>
    <styles>
        <style name="report" id="4">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">10pt</property>
        </style>
        <style name="crosstab-cell" id="5">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
        <style name="crosstab" id="6">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
    </styles>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2">
            <property name="orientation">landscape</property>
            <property name="topMargin">1in</property>
            <property name="leftMargin">1.25in</property>
            <property name="bottomMargin">1in</property>
            <property name="rightMargin">1.25in</property>
            <page-footer>
                <text id="3">
                    <property name="contentType">html</property>
                    <text-property name="content"><![CDATA[<value-of>new Date()</value-of>]]></text-property>
                </text>
            </page-footer>
        </simple-master-page>
    </page-setup>
    <body>
        <extended-item extensionName="Crosstab" extensionVersion="3.7.0" id="138">
            <property name="cube">Data Cube</property>
            <property name="measures">
                <extended-item extensionName="MeasureView" id="155">
                    <property name="measure">ORDER_COUNT</property>
                    <property name="detail">
                        <extended-item extensionName="AggregationCell" id="156">
                            <property name="aggregationOnRow">Group/CUSTOMERNAME</property>
                            <property name="aggregationOnColumn">Group1/THEMONTH</property>
                            <property name="content">
                                <data id="157">
                                    <property name="backgroundColor">yellow</property>
                                    <property name="resultSetColumn">ORDER_COUNT_Group/CUSTOMERNAME_Group1/THEMONTH</property>
                                </data>
                            </property>
                        </extended-item>
                    </property>
                    <property name="header">
                        <extended-item extensionName="CrosstabCell" id="158"/>
                    </property>
                </extended-item>
                <extended-item extensionName="MeasureView" id="160">
                    <property name="measure">PAYMENT_COUNT</property>
                    <property name="detail">
                        <extended-item extensionName="AggregationCell" id="161">
                            <property name="aggregationOnRow">Group/CUSTOMERNAME</property>
                            <property name="aggregationOnColumn">Group1/THEMONTH</property>
                            <property name="content">
                                <data id="162">
                                    <property name="backgroundColor">yellow</property>
                                    <property name="resultSetColumn">PAYMENT_COUNT_Group/CUSTOMERNAME_Group1/THEMONTH</property>
                                </data>
                            </property>
                        </extended-item>
                    </property>
                    <property name="header">
                        <extended-item extensionName="CrosstabCell" id="163"/>
                    </property>
                </extended-item>
            </property>
            <property name="rows">
                <extended-item extensionName="CrosstabView" id="140">
                    <property name="views">
                        <extended-item extensionName="DimensionView" id="141">
                            <property name="dimension">Group</property>
                            <property name="levels">
                                <extended-item extensionName="LevelView" name="NewLevel View" id="142">
                                    <property name="level">Group/CUSTOMERNUMBER</property>
                                    <property name="member">
                                        <extended-item extensionName="CrosstabCell" id="143">
                                            <property name="content">
                                                <data name="CUSTOMERNUMBER" id="144">
                                                    <property name="resultSetColumn">CUSTOMERNUMBER</property>
                                                </data>
                                            </property>
                                            <property name="backgroundColor">yellow</property>
                                        </extended-item>
                                    </property>
                                </extended-item>
                                <extended-item extensionName="LevelView" name="NewLevel View1" id="145">
                                    <property name="level">Group/CUSTOMERNAME</property>
                                    <property name="filter">
                                        <filter-condition-element>
                                            <expression name="expr" type="javascript">data["CUSTOMERNAME"]</expression>
                                            <property name="operator">eq</property>
                                            <simple-property-list name="value1">
                                                <value type="javascript">"Bob"</value>
                                            </simple-property-list>
                                            <property name="updateAggregation">true</property>
                                        </filter-condition-element>
                                    </property>
                                    <property name="member">
                                        <extended-item extensionName="CrosstabCell" id="146">
                                            <property name="content">
                                                <data name="CUSTOMERNAME" id="147">
                                                    <property name="backgroundColor">yellow</property>
                                                    <property name="resultSetColumn">CUSTOMERNAME</property>
                                                </data>
                                            </property>
                                        </extended-item>
                                    </property>
                                </extended-item>
                            </property>
                        </extended-item>
                    </property>
                </extended-item>
            </property>
            <property name="columns">
                <extended-item extensionName="CrosstabView" id="165">
                    <property name="views">
                        <extended-item extensionName="DimensionView" id="148">
                            <property name="dimension">Group1</property>
                            <property name="levels">
                                <extended-item extensionName="LevelView" name="NewLevel View2" id="149">
                                    <property name="level">Group1/THEYEAR</property>
                                    <property name="member">
                                        <extended-item extensionName="CrosstabCell" id="150">
                                            <property name="content">
                                                <data name="THEYEAR" id="151">
                                                    <property name="resultSetColumn">THEYEAR</property>
                                                </data>
                                            </property>
                                            <property name="backgroundColor">orange</property>
                                        </extended-item>
                                    </property>
                                </extended-item>
                                <extended-item extensionName="LevelView" name="NewLevel View3" id="152">
                                    <property name="level">Group1/THEMONTH</property>
                                    <property name="member">
                                        <extended-item extensionName="CrosstabCell" id="153">
                                            <property name="content">
                                                <data name="THEMONTH" id="154">
                                                    <property name="backgroundColor">orange</property>
                                                    <property name="resultSetColumn">THEMONTH</property>
                                                </data>
                                            </property>
                                        </extended-item>
                                    </property>
                                </extended-item>
                            </property>
                        </extended-item>
                    </property>
                </extended-item>
            </property>
            <property name="header">
                <extended-item extensionName="CrosstabCell" id="139">
                    <property name="content">
                        <grid id="166">
                            <column id="167"/>
                            <column id="168"/>
                            <row id="169">
                                <cell id="170">
                                    <property name="colSpan">1</property>
                                    <property name="rowSpan">1</property>
                                    <label id="172">
                                        <text-property name="text">Customer Number</text-property>
                                    </label>
                                </cell>
                                <cell id="171">
                                    <property name="colSpan">1</property>
                                    <property name="rowSpan">1</property>
                                    <label id="173">
                                        <text-property name="text">Customer Name</text-property>
                                    </label>
                                </cell>
                            </row>
                        </grid>
                    </property>
                    <property name="backgroundColor">#FFA500</property>
                </extended-item>
            </property>
            <property name="hideMeasureHeader">true</property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">CUSTOMERNUMBER</property>
                    <expression name="expression">dimension["Group"]["CUSTOMERNUMBER"]</expression>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="name">CUSTOMERNAME</property>
                    <expression name="expression">dimension["Group"]["CUSTOMERNAME"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">THEYEAR</property>
                    <expression name="expression">dimension["Group1"]["THEYEAR"]</expression>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="name">THEMONTH</property>
                    <expression name="expression">dimension["Group1"]["THEMONTH"]</expression>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="name">ORDER_COUNT_Group1/THEMONTH</property>
                    <expression name="expression">measure["ORDER_COUNT"]</expression>
                    <property name="dataType">integer</property>
                    <simple-property-list name="aggregateOn">
                        <value>Group1/THEMONTH</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">PAYMENT_COUNT_Group1/THEMONTH</property>
                    <expression name="expression">measure["PAYMENT_COUNT"]</expression>
                    <property name="dataType">integer</property>
                    <simple-property-list name="aggregateOn">
                        <value>Group1/THEMONTH</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">ORDER_COUNT_Group/CUSTOMERNAME</property>
                    <expression name="expression">measure["ORDER_COUNT"]</expression>
                    <property name="dataType">integer</property>
                    <simple-property-list name="aggregateOn">
                        <value>Group/CUSTOMERNAME</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">PAYMENT_COUNT_Group/CUSTOMERNAME</property>
                    <expression name="expression">measure["PAYMENT_COUNT"]</expression>
                    <property name="dataType">integer</property>
                    <simple-property-list name="aggregateOn">
                        <value>Group/CUSTOMERNAME</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">ORDER_COUNT_Group/CUSTOMERNAME_Group1/THEMONTH</property>
                    <expression name="expression">measure["ORDER_COUNT"]</expression>
                    <property name="dataType">integer</property>
                    <simple-property-list name="aggregateOn">
                        <value>Group/CUSTOMERNAME</value>
                        <value>Group1/THEMONTH</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">PAYMENT_COUNT_Group/CUSTOMERNAME_Group1/THEMONTH</property>
                    <expression name="expression">measure["PAYMENT_COUNT"]</expression>
                    <property name="dataType">integer</property>
                    <simple-property-list name="aggregateOn">
                        <value>Group/CUSTOMERNAME</value>
                        <value>Group1/THEMONTH</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
            </list-property>
        </extended-item>
    </body>
</report>
